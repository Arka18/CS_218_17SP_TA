     1                                 %line 1+1 ast9tmp.asm
     2                                 
     3                                 
     4                                 
     5                                 
     6                                 
     7                                 
     8                                 
     9                                 
    10                                 
    11                                 
    12                                 
    13                                 
    14                                 
    15                                 
    16                                 
    17                                 
    18                                 
    19                                 
    20                                 
    21                                 
    22                                 
    23                                 
    24                                 
    25                                 
    26                                 
    27                                 
    28                                 
    29                                 
    30                                 
    31                                 
    32                                 
    33                                 [section .data]
    34                                 
    35                                 
    36                                 
    37                                 
    38                                 TRUE equ 1
    39                                 FALSE equ 0
    40                                 
    41                                 EXIT_SUCCESS equ 0
    42                                 
    43                                 STDIN equ 0
    44                                 STDOUT equ 1
    45                                 STDERR equ 2
    46                                 
    47                                 SYS_read equ 0
    48                                 SYS_write equ 1
    49                                 SYS_open equ 2
    50                                 SYS_close equ 3
    51                                 SYS_fork equ 57
    52                                 SYS_exit equ 60
    53                                 SYS_creat equ 85
    54                                 SYS_time equ 201
    55                                 
    56                                 LF equ 10
    57                                 SPACE equ " "
    58                                 NULL equ 0
    59                                 ESC equ 27
    60                                 
    61                                 
    62                                 
    63                                 
    64                                 SUCCESS equ 0
    65                                 NOSUCCESS equ 1
    66                                 OVERMAX equ 2
    67                                 INPUTOVERFLOW equ 3
    68                                 ENDOFINPUT equ 4
    69                                 
    70                                 MAXNUM equ 100000
    71                                 BUFFSIZE equ 51
    72                                 
    73                                 
    74                                 
    75                                 
    76                                 
    77                                 
    78                                 
    79                                 [section .text]
    80                                 
    81                                 
    82                                 
    83                                 
    84                                 
    85                                 
    86                                 
    87                                 
    88                                 
    89                                 
    90                                 
    91                                 
    92                                 
    93                                 
    94                                 
    95                                 
    96                                 
    97                                 
    98                                 
    99                                 
   100                                 
   101                                 
   102                                 
   103                                 
   104                                 
   105                                 
   106                                 
   107                                 
   108                                 
   109                                 
   110                                 
   111                                 
   112                                 
   113                                 
   114                                 
   115                                 
   116                                 
   117                                 
   118                                 
   119                                 
   120                                 
   121                                 
   122                                 
   123                                 
   124                                 
   125                                 
   126                                 
   127                                 
   128                                 
   129                                 
   130                                 
   131                                 
   132                                 
   133                                 
   134                                 
   135                                 
   136                                 
   137                                 
   138                                 
   139                                 
   140                                 
   141                                 
   142                                 
   143                                 
   144                                 
   145                                 
   146                                 
   147                                 
   148                                 
   149                                 
   150                                 
   151                                 
   152                                 
   153                                 
   154                                 
   155                                 
   156                                 
   157                                 
   158                                 
   159                                 
   160                                 [global rdTriNum]
   161                                 rdTriNum:
   162 00000000 55                      push rbp
   163 00000001 4889E5                  mov rbp, rsp
   164 00000004 4883EC34                sub rsp, BUFFSIZE + 1
   165 00000008 53                      push rbx
   166 00000009 4154                    push r12
   167 0000000B 4155                    push r13
   168 0000000D 4156                    push r14
   169 0000000F 4157                    push r15
   170                                 
   171                                 
   172 00000011 57                      push rdi
   173 00000012 56                      push rsi
   174                                 rdTriNumStart:
   175                                 
   176 00000013 488D5DCD                lea rbx, byte [rbp - BUFFSIZE]
   177 00000017 49C7C700000000          mov r15, 0
   178                                 
   179 0000001E 5E                      pop rsi
   180 0000001F 4889F7                  mov rdi, rsi
   181 00000022 E866030000              call printString
   182                                 
   183                                 bufferLp:
   184 00000027 48C7C000000000          mov rax, SYS_read
   185 0000002E 48C7C700000000          mov rdi, STDIN
   186 00000035 488D75CC                lea rsi, byte [rbp - BUFFSIZE - 1]
   187 00000039 48C7C201000000          mov rdx, 1
   188 00000040 0F05                    syscall
   189                                 
   190 00000042 8A45CC                  mov al, byte [rbp - BUFFSIZE - 1]
   191 00000045 3C0A                    cmp al, LF
   192 00000047 741A                    je inputDone
   193                                 
   194 00000049 4983FF32                cmp r15, 50
   195 0000004D 7712                    ja lengthCheck
   196 0000004F 3C20                    cmp al, " "
   197 00000051 7400                    je leadingSpaces
   198 00000053 EB04                    jmp storeChar
   199                                 
   200                                 leadingSpaces:
   201 00000055 4983FF00                cmp r15, 0
   202 00000059 EBCA                    jmp bufferLp
   203                                 
   204                                 storeChar:
   205 0000005B 8803                    mov byte [rbx], al
   206 0000005D 48FFC3                  inc rbx
   207 00000060 49FFC7                  inc r15
   208                                 
   209                                 lengthCheck:
   210 00000063 EBC0                    jmp bufferLp
   211                                 
   212                                 inputDone:
   213 00000065 4983FF00                cmp r15, 0
   214 00000069 0F84C5000000            je noInputTRUE
   215 0000006F 4983FF32                cmp r15, 50
   216 00000073 7701                    ja nullDone
   217 00000075 C60300                  mov byte [rbx], NULL
   218                                 nullDone:
   219                                 
   220                                 
   221                                 
   222                                 
   223                                 
   224                                 errorInputOverflow:
   225 00000078 4983FF33                cmp r15, BUFFSIZE
   226 0000007C 0F84BB000000            je errorInputOverflowTRUE
   227 00000082 EBFE                    jmp errorInputOverflowDone
   228                                 
   229                                 errorInputOverflowDone:
   230                                 
   231                                 
   232                                 
   233                                 errorNoSuccess:
   234 00000084 49C7C700000000          mov r15, 0
   235 0000008B 488D5DCD                lea rbx, byte [rbp - BUFFSIZE]
   236                                 
   237                                 errorNoSuccessLp:
   238 0000008F 8A03                    mov al, byte [rbx]
   239 00000091 3C00                    cmp al, NULL
   240 00000093 742F                    je errorNoSuccessDone
   241                                 
   242 00000095 3C63                    cmp al, "c"
   243 00000097 0F87A9000000            ja errorNoSuccessTRUE
   244 0000009D 3C61                    cmp al, "a"
   245 0000009F 731B                    jae errorNoSuccessLpInc
   246                                 
   247 000000A1 3C43                    cmp al, "C"
   248 000000A3 0F879D000000            ja errorNoSuccessTRUE
   249 000000A9 3C41                    cmp al, "A"
   250 000000AB 730F                    jae errorNoSuccessLpInc
   251                                 
   252 000000AD 3C39                    cmp al, "9"
   253 000000AF 0F8791000000            ja errorNoSuccessTRUE
   254 000000B5 3C30                    cmp al, "0"
   255 000000B7 7303                    jae errorNoSuccessLpInc
   256                                 
   257 000000B9 E989000000              jmp errorNoSuccessTRUE
   258                                 errorNoSuccessLpInc:
   259 000000BE 48FFC3                  inc rbx
   260 000000C1 49FFC7                  inc r15
   261 000000C4 EBC7                    jmp errorNoSuccessLp
   262                                 
   263                                 errorNoSuccessDone:
   264                                 
   265                                 
   266                                 
   267 000000C6 49C7C200000000          mov r10, 0
   268 000000CD 49C7C300000000          mov r11, 0
   269 000000D4 49C7C50D000000          mov r13, 13
   270 000000DB 488D5DCD                lea rbx, byte [rbp - BUFFSIZE]
   271                                 tri2IntLp:
   272 000000DF 49C7C700000000          mov r15, 0
   273 000000E6 448A3B                  mov r15b, byte [rbx]
   274 000000E9 4180FF00                cmp r15b, NULL
   275 000000ED 7433                    je tri2IntDone
   276                                 
   277 000000EF 4C89D8                  mov rax, r11
   278 000000F2 41F7E5                  mul r13d
   279 000000F5 4989C3                  mov r11, rax
   280                                 
   281 000000F8 4180FF61                cmp r15b, "a"
   282 000000FC 730A                    jae cvtLowerCase
   283 000000FE 4180FF41                cmp r15b, "A"
   284 00000102 730E                    jae cvtUpperCase
   285 00000104 4180EF30                sub r15b, "0"
   286 00000108 EB10                    jmp cvtCharDone
   287                                 
   288                                 cvtLowerCase:
   289 0000010A 4180EF61                sub r15b, "a"
   290 0000010E 4180C70A                add r15b, 10
   291 00000112 EB06                    jmp cvtCharDone
   292                                 
   293                                 cvtUpperCase:
   294 00000114 4180EF41                sub r15b, "A"
   295 00000118 4180C70A                add r15b, 10
   296                                 
   297                                 cvtCharDone:
   298 0000011C 4D01FB                  add r11, r15
   299 0000011F 48FFC3                  inc rbx
   300 00000122 EBB9                    jmp tri2IntLp
   301                                 
   302                                 tri2IntDone:
   303                                 
   304                                 
   305                                 
   306                                 errorOverMaxStart:
   307 00000124 4981FBA0860100          cmp r11, MAXNUM
   308 0000012B 7726                    ja errorOverMaxTRUE
   309                                 errorOverMaxEnd:
   310                                 
   311                                 
   312                                 
   313 0000012D 5F                      pop rdi
   314 0000012E 44891F                  mov dword [rdi], r11d
   315                                 
   316                                 
   317 00000131 48C7C000000000          mov rax, SUCCESS
   318 00000138 EB29                    jmp rdTriNumEnd
   319                                 
   320                                 
   321                                 noInputTRUE:
   322 0000013A 48C7C004000000          mov rax, ENDOFINPUT
   323 00000141 EB20                    jmp rdTriNumEnd
   324                                 
   325                                 errorInputOverflowTRUE:
   326 00000143 48C7C003000000          mov rax, INPUTOVERFLOW
   327 0000014A EB17                    jmp rdTriNumEnd
   328                                 
   329                                 errorNoSuccessTRUE:
   330 0000014C 48C7C001000000          mov rax, NOSUCCESS
   331 00000153 EB0E                    jmp rdTriNumEnd
   332                                 
   333                                 errorOverMaxTRUE:
   334 00000155 48C7C002000000          mov rax, OVERMAX
   335 0000015C 49C7C300000000          mov r11, 0
   336 00000163 EBFE                    jmp rdTriNumEnd
   337                                 
   338                                 
   339                                 rdTriNumEnd:
   340 00000165 415F                    pop r15
   341 00000167 415E                    pop r14
   342 00000169 415D                    pop r13
   343 0000016B 415C                    pop r12
   344 0000016D 5B                      pop rbx
   345 0000016E 4889EC                  mov rsp, rbp
   346 00000171 5D                      pop rbp
   347 00000172 C3                      ret
   348                                 
   349                                 
   350                                 
   351                                 
   352                                 
   353                                 
   354                                 
   355                                 
   356                                 
   357                                 
   358                                 
   359                                 
   360                                 
   361                                 
   362                                 
   363                                 
   364                                 
   365                                 
   366                                 
   367                                 
   368                                 
   369                                 
   370                                 
   371                                 
   372                                 
   373                                 
   374                                 
   375                                 
   376                                 
   377                                 
   378                                 
   379                                 
   380                                 
   381                                 
   382                                 
   383                                 
   384                                 [global selectionSort]
   385                                 selectionSort:
   386 00000173 55                      push rbp
   387 00000174 53                      push rbx
   388 00000175 4154                    push r12
   389 00000177 4155                    push r13
   390 00000179 4156                    push r14
   391 0000017B 4157                    push r15
   392                                 startSelectionSort:
   393 0000017D 49C7C700000000          mov r15, 0
   394 00000184 49C7C600000000          mov r14, 0
   395 0000018B 49C7C500000000          mov r13, 0
   396 00000192 49C7C400000000          mov r12, 0
   397                                 
   398                                 outerLp:
   399 00000199 4939F6                  cmp r14, rsi
   400 0000019C 7332                    jae outerLpDone
   401 0000019E 468B24B7                mov r12d, dword [rdi + r14 * 4]
   402 000001A2 4D89F5                  mov r13, r14
   403 000001A5 4D89F7                  mov r15, r14
   404                                 innerLp:
   405 000001A8 4939F7                  cmp r15, rsi
   406 000001AB 7312                    jae innerLpDone
   407 000001AD 428B1CBF                mov ebx, dword [rdi + r15 * 4]
   408 000001B1 4439E3                  cmp ebx, r12d
   409 000001B4 7304                    jae bigDone
   410 000001B6 4989DC                  mov r12, rbx
   411 000001B9 4D89FD                  mov r13, r15
   412                                 bigDone:
   413 000001BC 49FFC7                  inc r15
   414 000001BF EBE5                    jmp innerLp
   415                                 innerLpDone:
   416 000001C1 428B04B7                mov eax, dword [rdi + r14 * 4]
   417 000001C5 428904AF                mov dword [rdi + r13 * 4], eax
   418 000001C9 468924B7                mov dword [rdi + r14 * 4], r12d
   419 000001CD 49FFC6                  inc r14
   420 000001D0 EBC5                    jmp outerLp
   421                                 outerLpDone:
   422                                 
   423                                 endSelectionSort:
   424 000001D2 415F                    pop r15
   425 000001D4 415E                    pop r14
   426 000001D6 415D                    pop r13
   427 000001D8 415C                    pop r12
   428 000001DA 5B                      pop rbx
   429 000001DB 5D                      pop rbp
   430 000001DC C3                      ret
   431                                 
   432                                 
   433                                 
   434                                 
   435                                 
   436                                 
   437                                 
   438                                 
   439                                 
   440                                 
   441                                 
   442                                 
   443                                 
   444                                 
   445                                 
   446                                 
   447                                 
   448                                 
   449                                 
   450                                 
   451                                 
   452                                 
   453                                 
   454                                 
   455                                 
   456                                 
   457                                 
   458                                 
   459                                 
   460                                 
   461                                 
   462                                 [global listStats]
   463                                 listStats:
   464 000001DD 55                      push rbp
   465 000001DE 4889E5                  mov rbp, rsp
   466 000001E1 53                      push rbx
   467 000001E2 4154                    push r12
   468 000001E4 4155                    push r13
   469 000001E6 4156                    push r14
   470 000001E8 4157                    push r15
   471                                 startListStats:
   472 000001EA 52                      push rdx
   473                                 
   474 000001EB 8B44B7FC                mov eax, dword [rdi + rsi * 4 - 4]
   475 000001EF 418901                  mov dword [r9], eax
   476                                 
   477                                 
   478 000001F2 8B07                    mov eax, dword [rdi]
   479 000001F4 8901                    mov dword [rcx], eax
   480                                 
   481                                 
   482 000001F6 89F0                    mov eax, esi
   483 000001F8 49C7C202000000          mov r10, 2
   484 000001FF 48C7C200000000          mov rdx, 0
   485 00000206 49F7F2                  div r10
   486 00000209 8B1C87                  mov ebx, dword [rdi + rax * 4]
   487                                 
   488 0000020C 4883FA00                cmp rdx, 0
   489 00000210 7512                    jne medianDone
   490 00000212 035C87FC                add ebx, dword [rdi + rax * 4 - 4]
   491 00000216 4889D8                  mov rax, rbx
   492 00000219 48C7C200000000          mov rdx, 0
   493 00000220 49F7F2                  div r10
   494 00000223 4889C3                  mov rbx, rax
   495                                 medianDone:
   496 00000226 418918                  mov dword [r8], ebx
   497                                 
   498                                 
   499 00000229 57                      push rdi
   500 0000022A 56                      push rsi
   501 0000022B 4150                    push r8
   502 0000022D E8B7000000              call lstAverage
   503 00000232 4158                    pop r8
   504 00000234 5E                      pop rsi
   505 00000235 5F                      pop rdi
   506 00000236 488B5D10                mov rbx, qword [rbp + 16]
   507 0000023A 8903                    mov dword [rbx], eax
   508                                 
   509                                 
   510 0000023C 5A                      pop rdx
   511 0000023D 4889D0                  mov rax, rdx
   512 00000240 418B18                  mov ebx, dword [r8]
   513 00000243 4829D8                  sub rax, rbx
   514 00000246 4883F800                cmp rax, 0
   515 0000024A 7D01                    jge negPctDone
   516 0000024C 48F7D8                  neg rax
   517                                 negPctDone:
   518 0000024F 48C7C364000000          mov rbx, 100
   519 00000256 48F7E3                  mul rbx
   520                                 
   521 00000259 418B18                  mov ebx, dword [r8]
   522 0000025C 48C7C200000000          mov rdx, 0
   523 00000263 F7F3                    div ebx
   524                                 
   525 00000265 488B5D18                mov rbx, qword [rbp + 24]
   526 00000269 8903                    mov dword [rbx], eax
   527                                 
   528                                 endListStats:
   529 0000026B 415F                    pop r15
   530 0000026D 415E                    pop r14
   531 0000026F 415D                    pop r13
   532 00000271 415C                    pop r12
   533 00000273 5B                      pop rbx
   534 00000274 5D                      pop rbp
   535 00000275 C3                      ret
   536                                 
   537                                 
   538                                 
   539                                 
   540                                 
   541                                 
   542                                 
   543                                 
   544                                 
   545                                 
   546                                 
   547                                 
   548                                 
   549                                 
   550                                 
   551                                 
   552                                 
   553                                 
   554                                 
   555                                 [global listEstMedian]
   556                                 listEstMedian:
   557 00000276 55                      push rbp
   558 00000277 53                      push rbx
   559 00000278 4154                    push r12
   560 0000027A 4155                    push r13
   561 0000027C 4156                    push r14
   562 0000027E 4157                    push r15
   563                                 startListEstMedian:
   564 00000280 49C7C000000000          mov r8, 0
   565 00000287 448B07                  mov r8d, dword [rdi]
   566                                 
   567 0000028A 4989F2                  mov r10, rsi
   568 0000028D 49FFCA                  dec r10
   569 00000290 46030497                add r8d, dword [rdi + r10 * 4]
   570                                 
   571 00000294 4889F0                  mov rax, rsi
   572 00000297 49C7C202000000          mov r10, 2
   573 0000029E 48C7C200000000          mov rdx, 0
   574 000002A5 49F7F2                  div r10
   575                                 
   576 000002A8 44030487                add r8d, dword [rdi + rax * 4]
   577 000002AC 4883FA01                cmp rdx, 1
   578 000002B0 741B                    je isOdd
   579                                 
   580 000002B2 48FFC8                  dec rax
   581 000002B5 44030487                add r8d, dword [rdi + rax * 4]
   582 000002B9 4C89C0                  mov rax, r8
   583 000002BC 49C7C204000000          mov r10, 4
   584 000002C3 48C7C200000000          mov rdx, 0
   585 000002CA 49F7F2                  div r10
   586 000002CD EB12                    jmp endListEstMedian
   587                                 isOdd:
   588 000002CF 49C7C203000000          mov r10, 3
   589 000002D6 4C89C0                  mov rax, r8
   590 000002D9 48C7C200000000          mov rdx, 0
   591 000002E0 49F7F2                  div r10
   592                                 endListEstMedian:
   593 000002E3 415F                    pop r15
   594 000002E5 415E                    pop r14
   595 000002E7 415D                    pop r13
   596 000002E9 415C                    pop r12
   597 000002EB 5B                      pop rbx
   598 000002EC 5D                      pop rbp
   599 000002ED C3                      ret
   600                                 
   601                                 
   602                                 
   603                                 
   604                                 
   605                                 
   606                                 
   607                                 
   608                                 
   609                                 
   610                                 
   611                                 
   612                                 
   613                                 
   614                                 
   615                                 
   616                                 
   617                                 
   618                                 [global lstAverage]
   619                                 lstAverage:
   620 000002EE 55                      push rbp
   621 000002EF 53                      push rbx
   622 000002F0 4154                    push r12
   623 000002F2 4155                    push r13
   624 000002F4 4156                    push r14
   625 000002F6 4157                    push r15
   626                                 startLstAverage:
   627 000002F8 49C7C200000000          mov r10, 0
   628 000002FF 48C7C000000000          mov rax, 0
   629                                 sumLp:
   630 00000306 42030497                add eax, dword [rdi + r10 * 4]
   631 0000030A 49FFC2                  inc r10
   632 0000030D 4939F2                  cmp r10, rsi
   633 00000310 72F2                    jb sumLp
   634                                 
   635 00000312 48C7C200000000          mov rdx, 0
   636 00000319 48F7F6                  div rsi
   637                                 endLstAverage:
   638 0000031C 415F                    pop r15
   639 0000031E 415E                    pop r14
   640 00000320 415D                    pop r13
   641 00000322 415C                    pop r12
   642 00000324 5B                      pop rbx
   643 00000325 5D                      pop rbp
   644 00000326 C3                      ret
   645                                 
   646                                 
   647                                 
   648                                 
   649                                 
   650                                 
   651                                 
   652                                 
   653                                 
   654                                 
   655                                 
   656                                 
   657                                 
   658                                 
   659                                 
   660                                 
   661                                 
   662                                 
   663                                 [global betaValue]
   664                                 betaValue:
   665 00000327 55                      push rbp
   666 00000328 53                      push rbx
   667 00000329 4154                    push r12
   668 0000032B 4155                    push r13
   669 0000032D 4156                    push r14
   670 0000032F 4157                    push r15
   671                                 startBetaValue:
   672 00000331 48C7C000000000          mov rax, 0
   673 00000338 49C7C700000000          mov r15, 0
   674 0000033F 49C7C400000000          mov r12, 0
   675                                 
   676                                 alphaLp:
   677 00000346 4939F4                  cmp r12, rsi
   678 00000349 7313                    jae alphaLpDone
   679 0000034B 428B04A7                mov eax, dword [rdi + r12 * 4]
   680 0000034F 4989C2                  mov r10, rax
   681 00000352 49F7E2                  mul r10
   682 00000355 49F7E2                  mul r10
   683 00000358 4901C7                  add r15, rax
   684 0000035B 49FFC4                  inc r12
   685 0000035E EBE4                    jmp alphaLp
   686                                 alphaLpDone:
   687                                 
   688 00000360 4889F0                  mov rax, rsi
   689 00000363 49C7C202000000          mov r10, 2
   690 0000036A 48C7C200000000          mov rdx, 0
   691 00000371 49F7F2                  div r10
   692 00000374 4801F0                  add rax, rsi
   693 00000377 4989C2                  mov r10, rax
   694 0000037A 4C89F8                  mov rax, r15
   695 0000037D 48C7C200000000          mov rdx, 0
   696 00000384 49F7F2                  div r10
   697                                 
   698                                 
   699                                 endBetaValue:
   700 00000387 415F                    pop r15
   701 00000389 415E                    pop r14
   702 0000038B 415D                    pop r13
   703 0000038D 415C                    pop r12
   704 0000038F 5B                      pop rbx
   705 00000390 5D                      pop rbp
   706 00000391 C3                      ret
   707                                 
   708                                 
   709                                 
   710                                 
   711                                 
   712                                 
   713                                 
   714                                 
   715                                 
   716                                 
   717                                 
   718                                 
   719                                 
   720                                 
   721                                 
   722                                 
   723                                 
   724                                 
   725                                 
   726                                 
   727                                 [global printString]
   728                                 printString:
   729                                 
   730                                 
   731                                 
   732                                 
   733 00000392 48C7C200000000          mov rdx, 0
   734                                 strCountLoop:
   735 00000399 803C1700                cmp byte [rdi+rdx], NULL
   736 0000039D 7403                    je strCountLoopDone
   737 0000039F 48FFC2                  inc rdx
   738 000003A2 EBF3                    jmp strCountLoop
   739                                 strCountLoopDone:
   740 000003A4 4883FA00                cmp rdx, 0
   741 000003A8 7411                    je printStringDone
   742                                 
   743                                 
   744                                 
   745                                 
   746 000003AA 48C7C001000000          mov rax, SYS_write
   747 000003B1 4889FE                  mov rsi, rdi
   748 000003B4 48C7C701000000          mov rdi, STDOUT
   749                                 
   750 000003BB 0F05                    syscall
   751                                 
   752                                 
   753                                 
   754                                 
   755                                 printStringDone:
   756 000003BD C3                      ret
   757                                 
   758                                 
   759                                 
